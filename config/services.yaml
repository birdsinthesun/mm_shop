parameters: null

services:
    _defaults:
        autowire: true
        autoconfigure: true
        
    mm_shop_bundle:
        class: 'Bits\MmShopBundle\MmShopBundle'
        public: true
        
    Bits\MmShopBundle\Migration\InstallMmShop:
        arguments:
            $connection: '@database_connection'
        tags:
            - { name: contao.migration }
            
    Bits\MmShopBundle\EventListener\Asset\AddAssetListener:
        arguments:
            $scopeMatcher: '@contao.routing.scope_matcher'
        tags:
            - { name: 'kernel.event_listener', event: 'kernel.request', priority: 1 }
    
    
    Bits\MmShopBundle\Controller\ProductController:
        arguments:
            $db: '@doctrine.dbal.default_connection'
            $resourceResolver: '@Bits\MmShopBundle\Service\ResourceResolver'
            $framework: '@contao.framework'
        tags: ['controller.service_arguments']
        
    Bits\MmShopBundle\Service\ResourceResolver:
        public: true
        arguments:
            $db: '@doctrine.dbal.default_connection'
    
    Bits\MmShopBundle\Routing\DynamicRouteLoader:
        autoconfigure: false
        arguments:
            $db: '@doctrine.dbal.default_connection'
        tags:
            - { name: routing.loader }
    
    Bits\MmShopBundle\EventListener\Backend\MailSubmitListener:
        public: true
        tags:
            - { name: kernel.event_listener, event: dc-general.model.pre-persist }
   
            
    Contao\CoreBundle\Security\Csrf\ContaoCsrfTokenManager:
        public: true
    
    security.csrf.token_manager:
        class: Symfony\Component\Security\Csrf\CsrfTokenManager
        public: true
    
    Bits\MmShopBundle\EventSubscriber\FormThemeSubscriber:
        public: true
        tags:
            - { name: kernel.event_subscriber }
        
    Bits\MmShopBundle\:
        resource: '../src/*'
        exclude: '../src/{Module,Controller,Resources,DependencyInjection,Entity,Migrations,Tests,Kernel.php}'

