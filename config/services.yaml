parameters: null

services:
    _defaults:
        autowire: true
        autoconfigure: true
        
    mm_shop_bundle:
        class: 'Bits\MmShopBundle\MmShopBundle'
        public: true
        
    Bits\MmShopBundle\Session\CartSessionBag:
        public: true
        
    
    Bits\MmShopBundle\Session\SessionFactory:
        decorates: session.factory
        arguments:
            - '@Bits\MmShopBundle\Session\SessionFactory.inner'
            - '@Bits\MmShopBundle\Session\CartSessionBag'
            
    Bits\MmShopBundle\Session\SessionFactory.inner:
        public: true
        
      
    Bits\MmShopBundle\Service\ResourceResolver:
        public: true
        arguments:
            $db: '@doctrine.dbal.default_connection'
    
    Bits\MmShopBundle\Routing\DynamicRouteLoader:
        autoconfigure: false
        arguments:
            $db: '@doctrine.dbal.default_connection'
        tags:
            - { name: routing.loader }
        
    Bits\MmShopBundle\Migration\InstallMmShop:
        arguments:
            $connection: '@database_connection'
        tags:
            - { name: contao.migration }
            
    Bits\MmShopBundle\EventListener\Asset\AddAssetListener:
        arguments:
            $scopeMatcher: '@contao.routing.scope_matcher'
        tags:
            - { name: 'kernel.event_listener', event: 'kernel.request', priority: 1 }
    
    Bits\MmShopBundle\Controller\:
        resource: '../src/Controller'
        tags: ['controller.service_arguments']
    
    
    Bits\MmShopBundle\Controller\ProductListController:
        arguments:
            $db: '@doctrine.dbal.default_connection'
            $resourceResolver: '@Bits\MmShopBundle\Service\ResourceResolver'
            $framework: '@contao.framework'
        tags: ['controller.service_arguments']
        
    Bits\MmShopBundle\Controller\ProductDetailController:
        arguments:
            $db: '@doctrine.dbal.default_connection'
            $resourceResolver: '@Bits\MmShopBundle\Service\ResourceResolver'
            $framework: '@contao.framework'
        tags: ['controller.service_arguments']
    
    
   
            
    Contao\CoreBundle\Security\Csrf\ContaoCsrfTokenManager:
        public: true
    
    security.csrf.token_manager:
        class: Symfony\Component\Security\Csrf\CsrfTokenManager
        public: true
        
    Bits\MmShopBundle\:
        resource: '../src/*'
        exclude: '../src/{Module,Controller,Resources,DependencyInjection,Entity,Migrations,Tests,Kernel.php}'

